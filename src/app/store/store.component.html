<!-- store.component.html -->

@if (isLoading()) {
  <div class="fixed inset-0 flex items-center justify-center bg-white/80 z-50">
    <div class="flex flex-col items-center gap-4">
      <!-- Pode usar SVG animado, ícone do lucide, ou pacote como ngx-spinner -->
      <div class="w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"></div>
      <p class="text-gray-600 font-medium">Carregando cardápio...</p>
    </div>
  </div>
} @else if (hasError()) {
  <div class="flex flex-col items-center justify-center min-h-screen gap-6 p-6 text-center">
    <h2 class="text-2xl font-bold text-red-600">Ops... algo deu errado</h2>
    <p class="text-gray-600 max-w-md">Não conseguimos carregar os dados da loja no momento. Tente novamente mais tarde.</p>
    <button 
      (click)="ngOnInit()" 
      class="px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90">
      Tentar novamente
    </button>
  </div>
} @else {
  <!-- Conteúdo normal -->
  <app-header [storeData]="storeData"></app-header>
  <main class="flex flex-col w-full">
    <app-search (setSearchText)="searchTerm.set($event)"></app-search>
    <app-category-selector
      [categories]="categories"
      [selectedId]="selectedCategoryId"
      (categoryChange)="onCategorySelect($event)">
    </app-category-selector>
    <section class="mt-2">
      <app-product-list [products]="filteredProducts" [categories]="categories"></app-product-list>
    </section>
  </main>
  <app-cart-status></app-cart-status>
}